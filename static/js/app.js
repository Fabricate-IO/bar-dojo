(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"C:\\Users\\Todd\\bar-dojo\\app\\Recipe\\RecipeAdd.js":[function(require,module,exports){
var hashHistory = ReactRouter.hashHistory;

module.exports = React.createClass({displayName: "exports",
  getInitialState: function () {
    return {};
  },
  handlePost: function (e) {
    e.preventDefault();
    var state = this.state;
    var recipe = {
      name: this.state.name.trim(),
    };
    if (!recipe.name) {
      return;
    }
    this.setState({ name: '' });
    $.ajax({
      url: '/api/Recipe',
      dataType: 'json',
      type: 'POST',
      data: recipe,
      success: function (data) {
        // already updated state, we're good to go
        hashHistory.push('/');
      }.bind(this),
      error: function (xhr, status, err) {
        this.setState(state);
        console.error(this.props.url, status, err.toString());
      }.bind(this),
    });
  },
  handleInputChange: function (e) {
    var object = this.state.object;
    object[e.target.name] = e.target.value;
    this.setState({ object: object });
  },
  render: function () {
    return (
      React.createElement("form", {onSubmit: this.handlePost}, 
        React.createElement("input", {
          type: "text", 
          name: "name", 
          placeholder: "Drink name", 
          value: this.state.object.name, 
          onChange: this.handleInputChange}
        ), 
        React.createElement("input", {type: "submit", value: "Add"})
      )
    );
  }
});

},{}],"C:\\Users\\Todd\\bar-dojo\\app\\Recipe\\RecipeEdit.js":[function(require,module,exports){
var hashHistory = ReactRouter.hashHistory;

module.exports = React.createClass({displayName: "exports",
  getInitialState: function () {
    return {
      object: {},
    };
  },
  componentDidMount: function () {
    $.ajax({
      url: '/api/Recipe/' + this.props.params.id,
      type: 'GET',
      success: function (data) {
        this.setState({ object: data });
      }.bind(this),
      error: function (xhr, status, err) {
        console.error(this.props.url, status, err.toString());
      }.bind(this),
    });
  },
  handlePut: function (e) {
    e.preventDefault();
    var object = this.state.object;
    var recipe = {
      id: this.props.params.id,
      name: object.name.trim(),
    };
    if (!recipe.name) {
      return;
    }
    this.setState({ object: {} });
    $.ajax({
      url: '/api/Recipe/' + recipe.id,
      dataType: 'json',
      type: 'PUT',
      data: recipe,
      success: function (data) {
        // already updated state, we're good to go
        hashHistory.push('/');
      }.bind(this),
      error: function (xhr, status, err) {
        this.setState({ object: object });
        console.error(this.props.url, status, err.toString());
      }.bind(this),
    });
  },
  handleInputChange: function (e) {
    var object = this.state.object;
    object[e.target.name] = e.target.value;
    this.setState({ object: object });
  },
  render: function () {
    return (
      React.createElement("form", {onSubmit: this.handlePut}, 
        React.createElement("input", {
          type: "text", 
          name: "name", 
          placeholder: "Drink name", 
          value: this.state.object.name, 
          onChange: this.handleInputChange}
        ), 
        React.createElement("input", {type: "submit", value: "Edit"})
      )
    );
  }
});

},{}],"C:\\Users\\Todd\\bar-dojo\\app\\Recipe\\RecipeLayout.js":[function(require,module,exports){
var ReactRouter = window.ReactRouter;
var Route = ReactRouter.Route;
var Link = ReactRouter.Link;

/*
Recipe.schema = {
  name: Joi.string().required(),
  tags: Joi.array().items(Joi.string()), // tag name
  instructions: Joi.array().items(Joi.string()), // optional
  ingredients: Joi.array().items(Joi.object().keys({
    stockTypeId: Joi.string(),
    quantity: Joi.number(),
  })),

  created: Joi.date().timestamp(),
  archived: Joi.boolean().default(false),
};
*/







module.exports = React.createClass({displayName: "exports",
  render: function () {
// TODO have Drinks menu have submenu for drink types
// TODO set up a router between category display and different drink menus (perhaps setting the selected category as a query val?)
// also a route for the add form
    // return (
    //   <Route component={RecipeLayout}>
    //     <Route path="/" component={RecipeList} />
    //     <Route path="/add" component={RecipeAdd} />
    //   </Route>
    // );
    return (
      React.createElement("div", null, 
        React.createElement("h1", null, "Recipes"), 
        React.createElement(Link, {to: "/"}, "List"), 
        React.createElement(Link, {to: "/add"}, "Add"), 
        this.props.children
      )
    );
  }
});

// <CommentForm onPost={this.handlePost} />

// <div>
//         <h1>Recipes</h1>
//         <RecipeList data={this.state.data} />
//       </div>

},{}],"C:\\Users\\Todd\\bar-dojo\\app\\Recipe\\RecipeList.js":[function(require,module,exports){
var hashHistory = ReactRouter.hashHistory;

var Recipe = React.createClass({displayName: "Recipe",
  handleDelete: function () {
    this.props.onDelete(this.props.recipe.id);
  },
  handleEdit: function () {
    hashHistory.push('/edit/' + this.props.recipe.id);
  },
  render: function () {
    return (
      React.createElement("li", {className: "recipe"}, 
        React.createElement("h2", null, 
          this.props.recipe.name
        ), 
        React.createElement("button", {className: "edit", onClick: this.handleEdit}, "EDIT"), 
        React.createElement("button", {className: "delete", onClick: this.handleDelete}, "X"), 
        this.props.children
      )
    );
  },
});

module.exports = React.createClass({displayName: "exports",
  getInitialState: function () {
    return {
      data: [],
    };
  },
  componentDidMount: function () {
    $.ajax({
      url: '/api/Recipe',
      type: 'GET',
      success: function (data) {
        this.setState({data: data});
      }.bind(this),
      error: function (xhr, status, err) {
        console.error(this.props.url, status, err.toString());
      }.bind(this),
    });
  },
  onDelete: function (id) {
    var data = this.state.data;
    var newData = data.filter((recipe) => { return recipe.id !== id; });
    this.setState({ data: newData });
    $.ajax({
      url: '/api/Recipe/' + id,
      type: 'DELETE',
      error: function (xhr, status, err) {
        console.error(this.props.url, status, err.toString());
        this.setState({data: data});
      }.bind(this),
    });
  },
  render: function () {
    var recipes = this.state.data.map((recipe) => {
      return React.createElement(Recipe, {key: recipe.id, recipe: recipe, onDelete: this.onDelete});
    });
    return (
      React.createElement("ul", null, 
        recipes
      )
    );
  },
});

},{}],"C:\\Users\\Todd\\bar-dojo\\app\\app.js":[function(require,module,exports){
var ReactRouter = window.ReactRouter;
var Router = ReactRouter.Router;
var IndexRoute = ReactRouter.IndexRoute;
var Route = ReactRouter.Route;
var Link = ReactRouter.Link;
var hashHistory = ReactRouter.hashHistory;

var RecipeLayout = require('./Recipe/RecipeLayout');
var RecipeList = require('./Recipe/RecipeList');
var RecipeAdd = require('./Recipe/RecipeAdd');
var RecipeEdit = require('./Recipe/RecipeEdit');

injectTapEventPlugin();


var PatronLayout = React.createClass({displayName: "PatronLayout",
  render: function () {
    return (
      React.createElement("div", null, "TODO")
    );
  }
});


var AppLayout = React.createClass({displayName: "AppLayout",
  render: function () {
    return (
      React.createElement("div", {id: "page"}, 
        React.createElement("ul", {className: "navbar"}, 
          React.createElement("li", null, React.createElement(Link, {to: "/"}, "Drinks")), 
          React.createElement("li", null, React.createElement(Link, {to: "/patrons"}, "Patrons")), 
          React.createElement("li", null, React.createElement(Link, {to: "/inventory"}, "Inventory")), 
          React.createElement("li", null, React.createElement(Link, {to: "/shopping"}, "Shopping List")), 
          React.createElement("li", null, React.createElement(Link, {to: "/history"}, "History"))
        ), 
        React.createElement("div", {id: "content"}, 
          this.props.children
        )
      )
    );
  }
});


ReactDOM.render(
  React.createElement(Router, {history: hashHistory}, 
    React.createElement(Route, {component: AppLayout}, 
      React.createElement(Route, {path: "/", component: RecipeLayout}, 
        React.createElement(IndexRoute, {component: RecipeList}), 
        React.createElement(Route, {path: "/add", component: RecipeAdd}), 
        React.createElement(Route, {path: "/edit/:id", component: RecipeEdit})
      ), 
      React.createElement(Route, {path: "/patrons", component: PatronLayout})
    )
  ),
  document.getElementById('app')
);

/*
      <Route component={SearchLayout}>
        <Route path="users" component={UserList} />
        <Route path="widgets" component={WidgetList} />
      </Route>
*/

},{"./Recipe/RecipeAdd":"C:\\Users\\Todd\\bar-dojo\\app\\Recipe\\RecipeAdd.js","./Recipe/RecipeEdit":"C:\\Users\\Todd\\bar-dojo\\app\\Recipe\\RecipeEdit.js","./Recipe/RecipeLayout":"C:\\Users\\Todd\\bar-dojo\\app\\Recipe\\RecipeLayout.js","./Recipe/RecipeList":"C:\\Users\\Todd\\bar-dojo\\app\\Recipe\\RecipeList.js"}]},{},["C:\\Users\\Todd\\bar-dojo\\app\\app.js"])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJDOlxcVXNlcnNcXFRvZGRcXGJhci1kb2pvXFxhcHBcXFJlY2lwZVxcUmVjaXBlQWRkLmpzIiwiQzpcXFVzZXJzXFxUb2RkXFxiYXItZG9qb1xcYXBwXFxSZWNpcGVcXFJlY2lwZUVkaXQuanMiLCJDOlxcVXNlcnNcXFRvZGRcXGJhci1kb2pvXFxhcHBcXFJlY2lwZVxcUmVjaXBlTGF5b3V0LmpzIiwiQzpcXFVzZXJzXFxUb2RkXFxiYXItZG9qb1xcYXBwXFxSZWNpcGVcXFJlY2lwZUxpc3QuanMiLCJDOlxcVXNlcnNcXFRvZGRcXGJhci1kb2pvXFxhcHBcXGFwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLElBQUksV0FBVyxHQUFHLFdBQVcsQ0FBQyxXQUFXLENBQUM7O0FBRTFDLG9DQUFvQyx1QkFBQTtFQUNsQyxlQUFlLEVBQUUsWUFBWTtJQUMzQixPQUFPLEVBQUUsQ0FBQztHQUNYO0VBQ0QsVUFBVSxFQUFFLFVBQVUsQ0FBQyxFQUFFO0lBQ3ZCLENBQUMsQ0FBQyxjQUFjLEVBQUUsQ0FBQztJQUNuQixJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3ZCLElBQUksTUFBTSxHQUFHO01BQ1gsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRTtLQUM3QixDQUFDO0lBQ0YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUU7TUFDaEIsT0FBTztLQUNSO0lBQ0QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQzVCLENBQUMsQ0FBQyxJQUFJLENBQUM7TUFDTCxHQUFHLEVBQUUsYUFBYTtNQUNsQixRQUFRLEVBQUUsTUFBTTtNQUNoQixJQUFJLEVBQUUsTUFBTTtNQUNaLElBQUksRUFBRSxNQUFNO0FBQ2xCLE1BQU0sT0FBTyxFQUFFLFVBQVUs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QUFBO0VBQ1QsUUFBUSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUM7QUFDaEMsQ0FBQyxDQUFDOztBQUVGO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsInZhciBoYXNoSGlzdG9yeSA9IFJlYWN0Um91dGVyLmhhc2hIaXN0b3J5O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XHJcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4ge307XHJcbiAgfSxcclxuICBoYW5kbGVQb3N0OiBmdW5jdGlvbiAoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcclxuICAgIHZhciByZWNpcGUgPSB7XHJcbiAgICAgIG5hbWU6IHRoaXMuc3RhdGUubmFtZS50cmltKCksXHJcbiAgICB9O1xyXG4gICAgaWYgKCFyZWNpcGUubmFtZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFN0YXRlKHsgbmFtZTogJycgfSk7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICB1cmw6ICcvYXBpL1JlY2lwZScsXHJcbiAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgZGF0YTogcmVjaXBlLFxyXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIC8vIGFscmVhZHkgdXBkYXRlZCBzdGF0ZSwgd2UncmUgZ29vZCB0byBnb1xyXG4gICAgICAgIGhhc2hIaXN0b3J5LnB1c2goJy8nKTtcclxuICAgICAgfS5iaW5kKHRoaXMpLFxyXG4gICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnIpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlKTtcclxuICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMucHJvcHMudXJsLCBzdGF0dXMsIGVyci50b1N0cmluZygpKTtcclxuICAgICAgfS5iaW5kKHRoaXMpLFxyXG4gICAgfSk7XHJcbiAgfSxcclxuICBoYW5kbGVJbnB1dENoYW5nZTogZnVuY3Rpb24gKGUpIHtcclxuICAgIHZhciBvYmplY3QgPSB0aGlzLnN0YXRlLm9iamVjdDtcclxuICAgIG9iamVjdFtlLnRhcmdldC5uYW1lXSA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7IG9iamVjdDogb2JqZWN0IH0pO1xyXG4gIH0sXHJcbiAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8Zm9ybSBvblN1Ym1pdD17dGhpcy5oYW5kbGVQb3N0fT5cclxuICAgICAgICA8aW5wdXRcclxuICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgIG5hbWU9XCJuYW1lXCJcclxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRHJpbmsgbmFtZVwiXHJcbiAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5vYmplY3QubmFtZX1cclxuICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUlucHV0Q2hhbmdlfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICAgPGlucHV0IHR5cGU9XCJzdWJtaXRcIiB2YWx1ZT1cIkFkZFwiIC8+XHJcbiAgICAgIDwvZm9ybT5cclxuICAgICk7XHJcbiAgfVxyXG59KTsiLCJ2YXIgaGFzaEhpc3RvcnkgPSBSZWFjdFJvdXRlci5oYXNoSGlzdG9yeTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xyXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgb2JqZWN0OiB7fSxcclxuICAgIH07XHJcbiAgfSxcclxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24gKCkge1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgdXJsOiAnL2FwaS9SZWNpcGUvJyArIHRoaXMucHJvcHMucGFyYW1zLmlkLFxyXG4gICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgb2JqZWN0OiBkYXRhIH0pO1xyXG4gICAgICB9LmJpbmQodGhpcyksXHJcbiAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IodGhpcy5wcm9wcy51cmwsIHN0YXR1cywgZXJyLnRvU3RyaW5nKCkpO1xyXG4gICAgICB9LmJpbmQodGhpcyksXHJcbiAgICB9KTtcclxuICB9LFxyXG4gIGhhbmRsZVB1dDogZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHZhciBvYmplY3QgPSB0aGlzLnN0YXRlLm9iamVjdDtcclxuICAgIHZhciByZWNpcGUgPSB7XHJcbiAgICAgIGlkOiB0aGlzLnByb3BzLnBhcmFtcy5pZCxcclxuICAgICAgbmFtZTogb2JqZWN0Lm5hbWUudHJpbSgpLFxyXG4gICAgfTtcclxuICAgIGlmICghcmVjaXBlLm5hbWUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7IG9iamVjdDoge30gfSk7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICB1cmw6ICcvYXBpL1JlY2lwZS8nICsgcmVjaXBlLmlkLFxyXG4gICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICB0eXBlOiAnUFVUJyxcclxuICAgICAgZGF0YTogcmVjaXBlLFxyXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIC8vIGFscmVhZHkgdXBkYXRlZCBzdGF0ZSwgd2UncmUgZ29vZCB0byBnb1xyXG4gICAgICAgIGhhc2hIaXN0b3J5LnB1c2goJy8nKTtcclxuICAgICAgfS5iaW5kKHRoaXMpLFxyXG4gICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnIpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgb2JqZWN0OiBvYmplY3QgfSk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcih0aGlzLnByb3BzLnVybCwgc3RhdHVzLCBlcnIudG9TdHJpbmcoKSk7XHJcbiAgICAgIH0uYmluZCh0aGlzKSxcclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgaGFuZGxlSW5wdXRDaGFuZ2U6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICB2YXIgb2JqZWN0ID0gdGhpcy5zdGF0ZS5vYmplY3Q7XHJcbiAgICBvYmplY3RbZS50YXJnZXQubmFtZV0gPSBlLnRhcmdldC52YWx1ZTtcclxuICAgIHRoaXMuc2V0U3RhdGUoeyBvYmplY3Q6IG9iamVjdCB9KTtcclxuICB9LFxyXG4gIHJlbmRlcjogZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGZvcm0gb25TdWJtaXQ9e3RoaXMuaGFuZGxlUHV0fT5cclxuICAgICAgICA8aW5wdXRcclxuICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgIG5hbWU9XCJuYW1lXCJcclxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRHJpbmsgbmFtZVwiXHJcbiAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5vYmplY3QubmFtZX1cclxuICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUlucHV0Q2hhbmdlfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICAgPGlucHV0IHR5cGU9XCJzdWJtaXRcIiB2YWx1ZT1cIkVkaXRcIiAvPlxyXG4gICAgICA8L2Zvcm0+XHJcbiAgICApO1xyXG4gIH1cclxufSk7IiwidmFyIFJlYWN0Um91dGVyID0gd2luZG93LlJlYWN0Um91dGVyO1xyXG52YXIgUm91dGUgPSBSZWFjdFJvdXRlci5Sb3V0ZTtcclxudmFyIExpbmsgPSBSZWFjdFJvdXRlci5MaW5rO1xyXG5cclxuLypcclxuUmVjaXBlLnNjaGVtYSA9IHtcclxuICBuYW1lOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcclxuICB0YWdzOiBKb2kuYXJyYXkoKS5pdGVtcyhKb2kuc3RyaW5nKCkpLCAvLyB0YWcgbmFtZVxyXG4gIGluc3RydWN0aW9uczogSm9pLmFycmF5KCkuaXRlbXMoSm9pLnN0cmluZygpKSwgLy8gb3B0aW9uYWxcclxuICBpbmdyZWRpZW50czogSm9pLmFycmF5KCkuaXRlbXMoSm9pLm9iamVjdCgpLmtleXMoe1xyXG4gICAgc3RvY2tUeXBlSWQ6IEpvaS5zdHJpbmcoKSxcclxuICAgIHF1YW50aXR5OiBKb2kubnVtYmVyKCksXHJcbiAgfSkpLFxyXG5cclxuICBjcmVhdGVkOiBKb2kuZGF0ZSgpLnRpbWVzdGFtcCgpLFxyXG4gIGFyY2hpdmVkOiBKb2kuYm9vbGVhbigpLmRlZmF1bHQoZmFsc2UpLFxyXG59O1xyXG4qL1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XHJcbiAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XHJcbi8vIFRPRE8gaGF2ZSBEcmlua3MgbWVudSBoYXZlIHN1Ym1lbnUgZm9yIGRyaW5rIHR5cGVzXHJcbi8vIFRPRE8gc2V0IHVwIGEgcm91dGVyIGJldHdlZW4gY2F0ZWdvcnkgZGlzcGxheSBhbmQgZGlmZmVyZW50IGRyaW5rIG1lbnVzIChwZXJoYXBzIHNldHRpbmcgdGhlIHNlbGVjdGVkIGNhdGVnb3J5IGFzIGEgcXVlcnkgdmFsPylcclxuLy8gYWxzbyBhIHJvdXRlIGZvciB0aGUgYWRkIGZvcm1cclxuICAgIC8vIHJldHVybiAoXHJcbiAgICAvLyAgIDxSb3V0ZSBjb21wb25lbnQ9e1JlY2lwZUxheW91dH0+XHJcbiAgICAvLyAgICAgPFJvdXRlIHBhdGg9XCIvXCIgY29tcG9uZW50PXtSZWNpcGVMaXN0fSAvPlxyXG4gICAgLy8gICAgIDxSb3V0ZSBwYXRoPVwiL2FkZFwiIGNvbXBvbmVudD17UmVjaXBlQWRkfSAvPlxyXG4gICAgLy8gICA8L1JvdXRlPlxyXG4gICAgLy8gKTtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXY+XHJcbiAgICAgICAgPGgxPlJlY2lwZXM8L2gxPlxyXG4gICAgICAgIDxMaW5rIHRvPVwiL1wiPkxpc3Q8L0xpbms+XHJcbiAgICAgICAgPExpbmsgdG89XCIvYWRkXCI+QWRkPC9MaW5rPlxyXG4gICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxyXG4gICAgICA8L2Rpdj5cclxuICAgICk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIDxDb21tZW50Rm9ybSBvblBvc3Q9e3RoaXMuaGFuZGxlUG9zdH0gLz5cclxuXHJcbi8vIDxkaXY+XHJcbi8vICAgICAgICAgPGgxPlJlY2lwZXM8L2gxPlxyXG4vLyAgICAgICAgIDxSZWNpcGVMaXN0IGRhdGE9e3RoaXMuc3RhdGUuZGF0YX0gLz5cclxuLy8gICAgICAgPC9kaXY+IiwidmFyIGhhc2hIaXN0b3J5ID0gUmVhY3RSb3V0ZXIuaGFzaEhpc3Rvcnk7XHJcblxyXG52YXIgUmVjaXBlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xyXG4gIGhhbmRsZURlbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5wcm9wcy5vbkRlbGV0ZSh0aGlzLnByb3BzLnJlY2lwZS5pZCk7XHJcbiAgfSxcclxuICBoYW5kbGVFZGl0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICBoYXNoSGlzdG9yeS5wdXNoKCcvZWRpdC8nICsgdGhpcy5wcm9wcy5yZWNpcGUuaWQpO1xyXG4gIH0sXHJcbiAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8bGkgY2xhc3NOYW1lPVwicmVjaXBlXCI+XHJcbiAgICAgICAgPGgyPlxyXG4gICAgICAgICAge3RoaXMucHJvcHMucmVjaXBlLm5hbWV9XHJcbiAgICAgICAgPC9oMj5cclxuICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImVkaXRcIiBvbkNsaWNrPXt0aGlzLmhhbmRsZUVkaXR9PkVESVQ8L2J1dHRvbj5cclxuICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImRlbGV0ZVwiIG9uQ2xpY2s9e3RoaXMuaGFuZGxlRGVsZXRlfT5YPC9idXR0b24+XHJcbiAgICAgICAge3RoaXMucHJvcHMuY2hpbGRyZW59XHJcbiAgICAgIDwvbGk+XHJcbiAgICApO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XHJcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBkYXRhOiBbXSxcclxuICAgIH07XHJcbiAgfSxcclxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24gKCkge1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgdXJsOiAnL2FwaS9SZWNpcGUnLFxyXG4gICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtkYXRhOiBkYXRhfSk7XHJcbiAgICAgIH0uYmluZCh0aGlzKSxcclxuICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcih0aGlzLnByb3BzLnVybCwgc3RhdHVzLCBlcnIudG9TdHJpbmcoKSk7XHJcbiAgICAgIH0uYmluZCh0aGlzKSxcclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgb25EZWxldGU6IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgdmFyIGRhdGEgPSB0aGlzLnN0YXRlLmRhdGE7XHJcbiAgICB2YXIgbmV3RGF0YSA9IGRhdGEuZmlsdGVyKChyZWNpcGUpID0+IHsgcmV0dXJuIHJlY2lwZS5pZCAhPT0gaWQ7IH0pO1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRhdGE6IG5ld0RhdGEgfSk7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICB1cmw6ICcvYXBpL1JlY2lwZS8nICsgaWQsXHJcbiAgICAgIHR5cGU6ICdERUxFVEUnLFxyXG4gICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMucHJvcHMudXJsLCBzdGF0dXMsIGVyci50b1N0cmluZygpKTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtkYXRhOiBkYXRhfSk7XHJcbiAgICAgIH0uYmluZCh0aGlzKSxcclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgcmVjaXBlcyA9IHRoaXMuc3RhdGUuZGF0YS5tYXAoKHJlY2lwZSkgPT4ge1xyXG4gICAgICByZXR1cm4gPFJlY2lwZSBrZXk9e3JlY2lwZS5pZH0gcmVjaXBlPXtyZWNpcGV9IG9uRGVsZXRlPXt0aGlzLm9uRGVsZXRlfT48L1JlY2lwZT47XHJcbiAgICB9KTtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDx1bD5cclxuICAgICAgICB7cmVjaXBlc31cclxuICAgICAgPC91bD5cclxuICAgICk7XHJcbiAgfSxcclxufSk7IiwidmFyIFJlYWN0Um91dGVyID0gd2luZG93LlJlYWN0Um91dGVyO1xyXG52YXIgUm91dGVyID0gUmVhY3RSb3V0ZXIuUm91dGVyO1xyXG52YXIgSW5kZXhSb3V0ZSA9IFJlYWN0Um91dGVyLkluZGV4Um91dGU7XHJcbnZhciBSb3V0ZSA9IFJlYWN0Um91dGVyLlJvdXRlO1xyXG52YXIgTGluayA9IFJlYWN0Um91dGVyLkxpbms7XHJcbnZhciBoYXNoSGlzdG9yeSA9IFJlYWN0Um91dGVyLmhhc2hIaXN0b3J5O1xyXG5cclxudmFyIFJlY2lwZUxheW91dCA9IHJlcXVpcmUoJy4vUmVjaXBlL1JlY2lwZUxheW91dCcpO1xyXG52YXIgUmVjaXBlTGlzdCA9IHJlcXVpcmUoJy4vUmVjaXBlL1JlY2lwZUxpc3QnKTtcclxudmFyIFJlY2lwZUFkZCA9IHJlcXVpcmUoJy4vUmVjaXBlL1JlY2lwZUFkZCcpO1xyXG52YXIgUmVjaXBlRWRpdCA9IHJlcXVpcmUoJy4vUmVjaXBlL1JlY2lwZUVkaXQnKTtcclxuXHJcbmluamVjdFRhcEV2ZW50UGx1Z2luKCk7XHJcblxyXG5cclxudmFyIFBhdHJvbkxheW91dCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcclxuICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXY+VE9ETzwvZGl2PlxyXG4gICAgKTtcclxuICB9XHJcbn0pO1xyXG5cclxuXHJcbnZhciBBcHBMYXlvdXQgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XHJcbiAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGlkPVwicGFnZVwiPlxyXG4gICAgICAgIDx1bCBjbGFzc05hbWU9XCJuYXZiYXJcIj5cclxuICAgICAgICAgIDxsaT48TGluayB0bz1cIi9cIj5Ecmlua3M8L0xpbms+PC9saT5cclxuICAgICAgICAgIDxsaT48TGluayB0bz1cIi9wYXRyb25zXCI+UGF0cm9uczwvTGluaz48L2xpPlxyXG4gICAgICAgICAgPGxpPjxMaW5rIHRvPVwiL2ludmVudG9yeVwiPkludmVudG9yeTwvTGluaz48L2xpPlxyXG4gICAgICAgICAgPGxpPjxMaW5rIHRvPVwiL3Nob3BwaW5nXCI+U2hvcHBpbmcgTGlzdDwvTGluaz48L2xpPlxyXG4gICAgICAgICAgPGxpPjxMaW5rIHRvPVwiL2hpc3RvcnlcIj5IaXN0b3J5PC9MaW5rPjwvbGk+XHJcbiAgICAgICAgPC91bD5cclxuICAgICAgICA8ZGl2IGlkPVwiY29udGVudFwiPlxyXG4gICAgICAgICAge3RoaXMucHJvcHMuY2hpbGRyZW59XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxuICB9XHJcbn0pO1xyXG5cclxuXHJcblJlYWN0RE9NLnJlbmRlcihcclxuICA8Um91dGVyIGhpc3Rvcnk9e2hhc2hIaXN0b3J5fT5cclxuICAgIDxSb3V0ZSBjb21wb25lbnQ9e0FwcExheW91dH0+XHJcbiAgICAgIDxSb3V0ZSBwYXRoPVwiL1wiIGNvbXBvbmVudD17UmVjaXBlTGF5b3V0fT5cclxuICAgICAgICA8SW5kZXhSb3V0ZSBjb21wb25lbnQ9e1JlY2lwZUxpc3R9IC8+XHJcbiAgICAgICAgPFJvdXRlIHBhdGg9XCIvYWRkXCIgY29tcG9uZW50PXtSZWNpcGVBZGR9IC8+XHJcbiAgICAgICAgPFJvdXRlIHBhdGg9XCIvZWRpdC86aWRcIiBjb21wb25lbnQ9e1JlY2lwZUVkaXR9IC8+XHJcbiAgICAgIDwvUm91dGU+XHJcbiAgICAgIDxSb3V0ZSBwYXRoPVwiL3BhdHJvbnNcIiBjb21wb25lbnQ9e1BhdHJvbkxheW91dH0gLz5cclxuICAgIDwvUm91dGU+XHJcbiAgPC9Sb3V0ZXI+LFxyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHAnKVxyXG4pO1xyXG5cclxuLypcclxuICAgICAgPFJvdXRlIGNvbXBvbmVudD17U2VhcmNoTGF5b3V0fT5cclxuICAgICAgICA8Um91dGUgcGF0aD1cInVzZXJzXCIgY29tcG9uZW50PXtVc2VyTGlzdH0gLz5cclxuICAgICAgICA8Um91dGUgcGF0aD1cIndpZGdldHNcIiBjb21wb25lbnQ9e1dpZGdldExpc3R9IC8+XHJcbiAgICAgIDwvUm91dGU+XHJcbiovIl19
